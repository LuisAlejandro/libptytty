prefix = @prefix@
exec_prefix = @exec_prefix@
bindir = @bindir@
libdir = @libdir@
includedir = @includedir@
INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL@ -m 755
INSTALL_DATA = @INSTALL@ -m 644
CXXFLAGS = @CXXFLAGS@ 
CPPFLAGS = @CPPFLAGS@
LDFLAGS = @LDFLAGS@
LIBS = @LIBS@
COMPILE = $(CXX) $(CPPFLAGS) $(CXXFLAGS) -I.
LINK = $(CXX) $(LDFLAGS)

srcdir =	@srcdir@
VPATH =		@srcdir@
.PATH:		@srcdir@

top_builddir = ..
basedir = ..
thisdir = src

.SUFFIXES:	.C .o .lo

#-------------------------------------------------------------------------
# inference rules
.C.o:
	$(COMPILE) -c $<

.C.lo:
	libtool --mode=compile $(COMPILE) -c $<

#.s.lo:
#	$(LIBTOOL) --mode=compile $(COMPILE) -c $<
#
#.S.lo:
#	$(LIBTOOL) --mode=compile $(COMPILE) -c $<

#-------------------------------------------------------------------------

all: allbin

libptytty.a: ptytty.lo logging.lo fdpass.lo
#	$(LINK) -o $@ $^ $(LIBS)
	libtool --mode=link $(LINK) -o libptytty.la $^

#-------------------------------------------------------------------------

tags: *.[Ch]
	ctags *.[Ch]

TAGS: *.[Ch]
	etags *.[Ch]

allbin: libptytty.a

alldoc:

clean:
	rm -rf *.a *.o *.lo *.tmp *.la .libs

realclean: clean
	rm -f tags TAGS

cleandir: realclean

distclean: realclean
	(cd $(srcdir); rm -f Makefile)

install: allbin alldoc install-perl
#	$(INSTALL) -d $(DESTDIR)$(bindir)
#	$(INSTALL_PROGRAM) rxvt  $(RXVT_BINNAME)
#	$(INSTALL_PROGRAM) rxvtc $(RXVTC_BINNAME)
#	$(INSTALL_PROGRAM) rxvtd $(RXVTD_BINNAME)

depend:
	makedepend -f Makefile.in -I. -Y *.C >/dev/null 2>&1
	makedepend -f Makefile.in -I. -Y *.C -a -o .lo >/dev/null 2>&1

# DO NOT DELETE: nice dependency list follows

fdpass.o: ../config.h libptytty.h
logging.o: ../config.h ptytty.h libptytty.h ptytty_conf.h
ptytty.o: ../config.h ptytty.h libptytty.h ptytty_conf.h

fdpass.lo: ../config.h libptytty.h
logging.lo: ../config.h ptytty.h libptytty.h ptytty_conf.h
ptytty.lo: ../config.h ptytty.h libptytty.h ptytty_conf.h
